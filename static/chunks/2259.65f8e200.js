"use strict";(globalThis.webpackChunkgrass_website=globalThis.webpackChunkgrass_website||[]).push([[2259],{2259:(l,h,a)=>{a.r(h),a.d(h,{default:()=>u});var n=a(1892),o=a(6884);class u extends o.Z{constructor(){super(...arguments),this.data=this.state({instant:!1,route:[],preview:"",size:1})}async create(){this.handlers.viewportResize=this.onViewportResize.bind(this),this.handlers.linkClick=this.onLinkClick.bind(this),this.handlers.linkMouseEnter=this.onLinkMouseEnter.bind(this),this.handlers.linkMouseLeave=this.onLinkMouseLeave.bind(this),this.handlers.buttonClick=this.onButtonClick.bind(this),this.references.displays=Array.isArray(this.references.displays)?this.references.displays:this.references.displays?[this.references.displays]:[],this.references.buttons=Array.isArray(this.references.buttons)?this.references.buttons:this.references.buttons?[this.references.buttons]:[],this.references.panels=Array.isArray(this.references.panels)?this.references.panels:this.references.panels?[this.references.panels]:[],this.references.links=Array.isArray(this.references.links)?this.references.links:this.references.links?[this.references.links]:[],this.references.levels=Array.isArray(this.references.levels)?this.references.levels:this.references.levels?[this.references.levels]:[]}async mount(){window.addEventListener("resize",this.handlers.viewportResize),window.addEventListener("orientationchange",this.handlers.viewportResize),this.references.links.forEach(e=>{e.addEventListener("click",this.handlers.linkClick),e.addEventListener("mouseenter",this.handlers.linkMouseEnter),e.addEventListener("mouseleave",this.handlers.linkMouseLeave)}),this.references.buttons.forEach(e=>{e.addEventListener("click",this.handlers.buttonClick)}),this.updateSize()}navigate(e,t=!1){if(e){if(this.getPanel(e)&&this.dispatch("menu.navigate",{identifier:e,instant:t}))return this.doNavigate(e,t)}else return this.reset();return!1}reset(){return this.dispatch("menu.reset")?this.doReset():!1}revert(e){return this.dispatch("menu.revert")?this.doRevert(e):!1}render(e){if(e==="route"||e==="size"){const t=this.references.levels.find(s=>s.dataset.menuDepth==="1"),i=this.references.levels.find(s=>s.dataset.menuDepth==="2");this.references.levels.forEach(s=>{const r=this.data.route.length,d=parseInt(s.dataset.menuDepth);r>=d?s.classList.add("is-active"):s.classList.remove("is-active")}),this.references.panels.forEach(s=>{const r=s.dataset.menuIdentifier,c=r&&this.data.route.includes(r)?1:0;n.default.to(s,{autoAlpha:c,ease:"power4.inOut",duration:this.data.instant?0:.75})}),this.references.links.forEach(s=>{const r=s.dataset.menuIdentifier;r&&this.data.route.includes(r)?s.classList.add("is-active"):s.classList.remove("is-active")}),n.default.to(t,{x:this.data.route.length>0?"-100%":"0%",ease:"power4.inOut",duration:this.data.instant?0:.75}),n.default.to(i,{x:this.data.route.length>0?"-100%":"0%",ease:"power4.inOut",duration:this.data.instant?0:.75}),this.data.size>1?n.default.to(this.references.drawer,{x:this.data.route.length>1?"0%":"-100%",zIndex:0,ease:"power4.inOut",duration:this.data.instant?0:.75}):n.default.to(this.references.drawer,{x:this.data.route.length>1?"-100%":"0%",zIndex:1,ease:"power4.inOut",duration:this.data.instant?0:.75})}if(e==="preview"){const t=this.references.displays.find(i=>i.dataset.menuIdentifier===this.data.preview);n.default.to(this.references.preview,{x:this.data.preview?"0%":"-100%",ease:"power4.inOut",duration:.75}),this.references.displays.forEach(i=>{const s=this.data.preview&&i.dataset.menuIdentifier===this.data.preview?1:0;n.default.to(i,{autoAlpha:s,ease:"power4.inOut",duration:.75})}),this.references.links.forEach(i=>{const s=i.dataset.menuIdentifier;s&&this.data.preview===s&&t?i.classList.add("is-preview"):i.classList.remove("is-preview")})}}updateSize(){this.data.size=Math.floor(window.innerWidth/400)}determineRoute(e){const t=[];for(;;){const i=this.references.links.find(s=>s.dataset.menuIdentifier===e);if(t.unshift(e),i&&i.dataset.menuParent)e=i.dataset.menuParent;else break}return t}getPanel(e){return this.references.panels.find(t=>t.dataset.menuIdentifier===e)}onViewportResize(){this.updateSize()}onLinkClick(e){const t=e.target.dataset.menuIdentifier;t&&this.navigate(t)&&e.preventDefault()}onLinkMouseEnter(e){const t=e.target.dataset.menuIdentifier;this.data.preview=t}onLinkMouseLeave(){this.data.preview=""}onButtonClick(e){const t=parseInt(e.target.dataset.menuDepth);this.revert(t)}doReset(){return this.data.route=[],!0}doNavigate(e,t=!1){return this.data.instant=t,this.data.route=this.determineRoute(e),!0}doRevert(e){const t=e?e-1:this.data.route.length-1;return this.data.instant=!1,this.data.route=this.data.route.slice(0,t),!0}}}}]);
